---
phase: 07-distribution-notarization
plan: 06
type: execute
wave: 4
depends_on: ["07-04"]
files_modified: []
autonomous: false

user_setup:
  - service: github
    why: "Create Homebrew tap repository"
    dashboard_config:
      - task: "Create new repository: homebrew-toevent"
        location: "github.com/new"

must_haves:
  truths:
    - "User can install via brew tap + brew install"
    - "Cask points to latest GitHub release"
    - "Cask has correct SHA256 hash"
  artifacts: []
  key_links: []
---

<objective>
Create Homebrew tap for ToEvent installation

Purpose: Enable easy installation via `brew install --cask toevent`
Output: Homebrew tap repository with cask formula
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-distribution-notarization/07-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Create Homebrew tap repository</action>
  <instructions>
    1. Go to https://github.com/new
    2. Create repository named: homebrew-toevent
    3. Owner: Immedio (or your personal account)
    4. Make it public
    5. Initialize with README

    The repository name MUST start with "homebrew-" for Homebrew to recognize it as a tap.
  </instructions>
  <resume-signal>Provide the tap repository URL (e.g., https://github.com/Immedio/homebrew-toevent)</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Create cask formula in tap repository</name>
  <files>
    (In homebrew-toevent repo) Casks/toevent.rb
  </files>
  <action>
    After user provides tap repository URL:

    1. Clone the tap repository
    2. Create Casks directory
    3. Create toevent.rb cask file:

    ```ruby
    cask "toevent" do
      version "0.9.0"
      sha256 "PLACEHOLDER_HASH"

      url "https://github.com/Immedio/toevent/releases/download/v#{version}/ToEvent-#{version}.dmg"
      name "ToEvent"
      desc "Menu bar app showing next calendar event with countdown"
      homepage "https://github.com/Immedio/toevent"

      depends_on macos: ">= :ventura"

      app "ToEvent.app"

      zap trash: [
        "~/Library/Preferences/com.immedio.ToEvent.plist",
        "~/Library/Application Support/ToEvent",
        "~/Library/Caches/com.immedio.ToEvent",
      ]
    end
    ```

    4. Commit and push

    NOTE: sha256 is placeholder. After first release:
    - Download DMG from release
    - Run: shasum -a 256 ToEvent-0.9.0.dmg
    - Update sha256 in cask file

    The cask can be updated manually after each release, or automated with a GitHub Action in the tap repo.
  </action>
  <verify>
    - Cask file syntax is valid: `brew audit --cask toevent` (after tap is added)
    - Repository structure: homebrew-toevent/Casks/toevent.rb
  </verify>
  <done>
    Homebrew tap created with cask formula pointing to GitHub releases
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Homebrew tap repository with cask formula for ToEvent.

    After first release (v0.9.0):
    1. Download DMG from GitHub release
    2. Calculate SHA256: shasum -a 256 ToEvent-0.9.0.dmg
    3. Update sha256 in Casks/toevent.rb
    4. Push update to tap repo
  </what-built>
  <how-to-verify>
    Test installation (after first release):
    ```bash
    brew tap Immedio/toevent
    brew install --cask toevent
    ```

    Verify:
    - App installs to /Applications
    - App launches without Gatekeeper warning
    - App can access calendars after permission grant
  </how-to-verify>
  <resume-signal>Type "homebrew verified" after testing installation, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- [ ] Tap repository exists at github.com/Immedio/homebrew-toevent
- [ ] Casks/toevent.rb exists with correct structure
- [ ] Cask references correct GitHub release URL
- [ ] Installation works: brew tap + brew install
- [ ] Installed app passes Gatekeeper
</verification>

<success_criteria>
Users can install ToEvent via Homebrew:
```bash
brew tap Immedio/toevent
brew install --cask toevent
```
App installs to /Applications and works without Gatekeeper warnings.
</success_criteria>

<output>
After completion, create `.planning/phases/07-distribution-notarization/07-06-SUMMARY.md`
</output>
